


<div class="card post-card" style="margin-top: 5%">
  <div class="card-header d-flex">
    <div class="mr-auto p-2">
      <%= link_to posts_path do%>
        <h3><i class="fas fa-chevron-left back-button" ></i></h3>
      <% end %>
    </div>
    
    <div class="mr-auto p-2">
      <h1 class="card-title" style="color: black !important;"><%= @post.title %></h1>
    </div>
    
    <div class="p-2">
      <%= link_to post_path(@post), method: :delete, data: { confirm: "Are you sure you want to delete this article?"} do %>
        <% if policy(@post).destroy? %> 
          <h3><i class="fas fa-trash-alt delete-button"></i></h3>
        <% end %>
      <% end %>
    </div>

    <div class="p-2">
      <%= link_to edit_post_path(@post) do%>
        <% if policy(@post).update? %> 
          <h3><i class="far fa-edit edit-button"></i></h3>
        <% end %>
      <% end %>
    </div>

  </div>

  <% if @post.file.attached? %>
    <div id="image-container">
      <%= image_tag @post.file, id: "photo" %>
    </div>
  <% end %>
  
  
  
  
  
  <div class="card-header d-flex" >
    <div class="mr-auto p-2">
      <p style="margin: 0px !important;"><i>Posted by <b><%= @post.author.username %></b> <%= @post.created_at.strftime("on %d/%m/%Y at %I:%M%p") %></i></p>
    </div>
    <div class="p-2" style="padding: 0px !important;">
      <% if @post.file.attached? %>
        <button class="btn btn-secondary" id="opening">Expand image <i class="fas fa-chevron-down"></i></button>
        <%= javascript_pack_tag 'scripts'%>
      <% end %>
    </div>
  </div>
  
  <div class="card-body">
    <p class="card-text post-body"> 
      <% if @post.body==""%>
        <i>This post has no body</i>
      <% else %>
        <%= @post.body%>
      <% end %>
    </p>
  </div>
  
  <div class="card footer">
   
   <div class="d-flex">
    <div class="mr-auto p-2">
      <h3 style="color: black !important;">Comments</h3>
    </div>
    <div class="p-2">
      <h4 style="color: gray !important;"> <%= @post.comments.length%> comments</h4>
    </div>
   </div>
    <%= render @post.comments %>
    <%= render 'comments/form' %>
  </div>
</div>
